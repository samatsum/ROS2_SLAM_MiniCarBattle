F1TENTH データ記録・分析システム解説
このドキュメントでは、私たちが開発したシステムが「何のために」「何をして」「どう役に立つのか」を、専門用語を使わずに解説します。

1. 目的：なぜこのシステムが必要？
自動運転カーが速く走るためには、以下の2つを正確に知る必要があります。

「今、自分がどこにいるか」 (自己位置推定)
「周りのコースがどうなっているか」 (地図作成)
このシステムは、車が走った時の**「動きの履歴」と「周りの見え方」**を詳細に記録し、後から分析できるようにするためのものです。 これにより、「自分がいたと思った場所」と「実際にタイヤが動いた量」のズレを確認したり、より正確な地図を作ったりすることができます。

2. 仕組み：どのようにデータを集めて処理している？
このシステムは、大きく分けて 「2つの視点」 でデータを集めています。

A. 「理想の動き」の記録 (Simulation)
車が計算上「自分はここにいるはずだ」と考えている位置情報です。

取得方法: 車の制御システムから直接データを貰います。
役割: これが「基準」となります。
B. 「実際のタイヤの動き」の記録 (Mickey)
ここでは、車の前輪と後輪を、パソコンのマウスのように扱います。マウスを動かすと「右に何ミリ、上に何ミリ」と移動量が分かりますよね？それと同じことをしています。 これを私たち（開発チーム）は愛着を込めて "Mickey"（ミッキー） と呼んでいます。

取得方法: 500Hz（1秒間に500回）というものすごい速さでタイヤの動きを監視し、細かな移動量を積み重ねて記録します。
処理内容 (Kinematics):
前輪と後輪の移動量の差から、「ハンドルをどれくらい切ったか（ステアリング角度）」を逆算します。
これにより、単なる移動だけでなく「車がどう曲がったか」まで分かります。
C. 「目の役割」のデータ処理 (Lidar Segments)
車には「Lidar（ライダー）」という、レーザーで距離を測る目がついています。しかし、Lidarから来るデータは無数の「点」の集まりで、そのままだと扱いづらいです。

処理内容 (線分抽出):
無数の点の中から、並んでいる点を見つけて「ここは壁だ！」と判断し、**「1本の線（セグメント）」**に変換します。
点を線に変換することで、データ量が激減し、扱いやすくなります。
連携:
この時、先ほどの「Mickey」のデータを使って、「車がこの位置にいるとしたら、壁はここに見えているはず」という計算をして保存します。
3. 活用：集めたデータは何に使う？
こうして集められたデータ（CSVファイル）は、以下のように使われます。

① ズレの発見
「Simulation（理想）」と「Mickey（現実）」のデータを重ね合わせることで、**「タイヤが滑って空転した場所」や「計算が間違っている場所」**を一目で見つけることができます。

② 正確な地図作り (SLAM)
「Simulation」ではなく、「Mickey」の細かい動きの情報と、Lidarで見つけた「壁の線」を組み合わせることで、より歪みの少ない、正確なコース図を作ることができます。

③ 次の走りの改善
一度走って集めた「壁の線」のデータを正解として保存しておけば、次回走る時に「今見えている壁」と比較することで、**「あ、さっきより少し右にズレてるな」**と瞬時に気づき、コース取りを修正できます。

まとめ
このシステムは、ただ走るだけでなく、「自分の身体感覚（タイヤの動き）」と「視覚（壁の見え方）」を詳細に日記につけているようなものです。 この日記を分析することで、ロボットはより賢く、より速く走れるようになるのです。